<!-- jQuery 3 -->
<script type="text/javascript" src="${ctxPath}/frame/jquery/jquery-3.4.1.js"></script>
<!-- vue -->
<script type="text/javascript" src="${ctxPath}/frame/vue/vue.min.js"></script>
<!-- layui -->
<script src="${ctxPath}/frame/layui-v2.5.7/layui/layui.js"></script>
<link rel="stylesheet" href="${ctxPath}/frame/layui-v2.5.7/layui/css/layui.css">

<!-- 添加/修改学生基本信息 -->
<div style="padding-top: 20px;">
    <p id="actionTag" hidden>${action}</p>
    <div id="stuEditModal">
        <form class="layui-form" action="">
            <div class="layui-form-item">
                <label class="layui-form-label">姓名</label>
                <div class="layui-input-block" style="width: 45%;">
                    <input type="text" name="name" required lay-verify="required|name" placeholder="学生姓名" autocomplete="off"
                           class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">

                <div class="layui-inline">
                    <label class="layui-form-label">出身日期</label>
                    <div class="layui-input-inline">
                        <input type="text" name="birthday" id="date" required lay-verify="date|required"
                                placeholder="请选择出生日期" autocomplete="off" class="layui-input">
                    </div>
                </div>


                <div class="layui-inline">
                    <label class="layui-form-label" style="padding-left: 0px;">学生性别</label>
                    <div class="layui-input-block">
                        <input type="radio" name="sex" value="男" title="男">
                        <input type="radio" name="sex" value="女" title="女" checked>
                    </div>
                </div>
            </div>

            <div class="layui-form-item">
                <label class="layui-form-label">选择年级</label>
                <div class="layui-input-inline">
                    <select name="gradeId" lay-verify="required" lay-search="">
                        <option value="">点击获取年级列表</option>
                        <option value="1">初一</option>
                        <option value="2">初二</option>
                        <option value="3">初三</option>
                    </select>
                </div>
                <label class="layui-form-label">选择班级</label>
                <div class="layui-input-inline">
                    <select name="clazzId" lay-verify="required" lay-search="">
                        <option value="">请先选择年级</option>
                        <option value="1">layer</option>
                        <option value="2">form</option>
                        <option value="3">layim</option>
                    </select>
                </div>
            </div>
            <div class="layui-form-item layui-form-text">
                <label class="layui-form-label">备注</label>
                <div class="layui-input-block" style="width: 500px;">
                    <textarea name="remark" placeholder="请输入内容" class="layui-textarea"></textarea>
                </div>
            </div>
            <div class="layui-form-item">
                <div class="layui-input-block">
                    <button class="layui-btn" lay-submit lay-filter="stuEdit">立即提交</button>
                    <button type="reset" class="layui-btn layui-btn-primary">重置</button>
                </div>
            </div>
        </form>
    </div>
</div>

<script>
    var formVue = new Vue({
        el: "#stuEditModal",
        data : {
            form : null,
            actionType : null,
        },
        methods : {

        },
        mounted : function () {
            this.actionType = $("#actionTag").text();
            console.log(this.actionType);
        }
    })

    layui.use(['form', 'layedit', 'laydate'], function () {
        var form = layui.form
            ,layer = layui.layer
            ,layedit = layui.layedit
            ,laydate = layui.laydate;

        console.log(laydate);
        formVue.form = form;
        formVue.editIndex = layedit.build('editor')
        //日期
        laydate.render({
            elem: '#date'
        });

        //自定义验证规则
        form.verify({
            name: function(value){
                if(value.length < 2){
                    return '名字至少2字';
                }
            }
            ,pass: [
                /^[\S]{6,12}$/
                ,'密码必须6到12位，且不能出现空格'
            ]
            ,content: function(value){
                layedit.sync(editIndex);
            }
        });
    })
</script>